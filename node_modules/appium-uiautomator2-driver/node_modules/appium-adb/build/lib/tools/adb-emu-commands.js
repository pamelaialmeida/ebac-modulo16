"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
require("source-map-support/register");
var _logger = _interopRequireDefault(require("../logger.js"));
var _helpers = require("../helpers");
var _lodash = _interopRequireDefault(require("lodash"));
var _net = _interopRequireDefault(require("net"));
var _support = require("@appium/support");
var _bluebird = _interopRequireDefault(require("bluebird"));
var _path = _interopRequireDefault(require("path"));
var _ini = _interopRequireDefault(require("ini"));
const emuMethods = {};
emuMethods.POWER_AC_STATES = Object.freeze({
  POWER_AC_ON: 'on',
  POWER_AC_OFF: 'off'
});
emuMethods.GSM_CALL_ACTIONS = Object.freeze({
  GSM_CALL: 'call',
  GSM_ACCEPT: 'accept',
  GSM_CANCEL: 'cancel',
  GSM_HOLD: 'hold'
});
emuMethods.GSM_VOICE_STATES = Object.freeze({
  GSM_VOICE_UNREGISTERED: 'unregistered',
  GSM_VOICE_HOME: 'home',
  GSM_VOICE_ROAMING: 'roaming',
  GSM_VOICE_SEARCHING: 'searching',
  GSM_VOICE_DENIED: 'denied',
  GSM_VOICE_OFF: 'off',
  GSM_VOICE_ON: 'on'
});
emuMethods.GSM_SIGNAL_STRENGTHS = [0, 1, 2, 3, 4];
emuMethods.NETWORK_SPEED = Object.freeze({
  GSM: 'gsm',
  SCSD: 'scsd',
  GPRS: 'gprs',
  EDGE: 'edge',
  UMTS: 'umts',
  HSDPA: 'hsdpa',
  LTE: 'lte',
  EVDO: 'evdo',
  FULL: 'full'
});
emuMethods.SENSORS = Object.freeze({
  ACCELERATION: 'acceleration',
  GYROSCOPE: 'gyroscope',
  MAGNETIC_FIELD: 'magnetic-field',
  ORIENTATION: 'orientation',
  TEMPERATURE: 'temperature',
  PROXIMITY: 'proximity',
  LIGHT: 'light',
  PRESSURE: 'pressure',
  HUMIDITY: 'humidity',
  MAGNETIC_FIELD_UNCALIBRATED: 'magnetic-field-uncalibrated',
  GYROSCOPE_UNCALIBRATED: 'gyroscope-uncalibrated',
  HINGE_ANGLE0: 'hinge-angle0',
  HINGE_ANGLE1: 'hinge-angle1',
  HINGE_ANGLE2: 'hinge-angle2',
  HEART_RATE: 'heart-rate',
  RGBC_LIGHT: 'rgbc-light'
});
async function listEmulators() {
  let avdsRoot = process.env.ANDROID_AVD_HOME;
  if (await (0, _helpers.dirExists)(avdsRoot)) {
    return await getAvdConfigPaths(avdsRoot);
  }
  if (avdsRoot) {
    _logger.default.warn(`The value of the ANDROID_AVD_HOME environment variable '${avdsRoot}' is not an existing directory`);
  }
  const prefsRoot = await (0, _helpers.getAndroidPrefsRoot)();
  if (!prefsRoot) {
    return [];
  }
  avdsRoot = _path.default.resolve(prefsRoot, 'avd');
  if (!(await (0, _helpers.dirExists)(avdsRoot))) {
    _logger.default.debug(`Virtual devices config root '${avdsRoot}' is not an existing directory`);
    return [];
  }
  return await getAvdConfigPaths(avdsRoot);
}
async function getAvdConfigPaths(avdsRoot) {
  const configs = await _support.fs.glob('*.ini', {
    cwd: avdsRoot,
    absolute: true
  });
  return configs.map(confPath => {
    const avdName = _path.default.basename(confPath).split('.').slice(0, -1).join('.');
    return {
      name: avdName,
      config: confPath
    };
  }).filter(({
    name
  }) => _lodash.default.trim(name));
}
emuMethods.isEmulatorConnected = async function isEmulatorConnected() {
  let emulators = await this.getConnectedEmulators();
  return !!_lodash.default.find(emulators, x => x && x.udid === this.curDeviceId);
};
emuMethods.verifyEmulatorConnected = async function verifyEmulatorConnected() {
  if (!(await this.isEmulatorConnected())) {
    throw new Error(`The emulator "${this.curDeviceId}" was unexpectedly disconnected`);
  }
};
emuMethods.fingerprint = async function fingerprint(fingerprintId) {
  if (!fingerprintId) {
    throw new Error('Fingerprint id parameter must be defined');
  }
  let level = await this.getApiLevel();
  if (level < 23) {
    throw new Error(`Device API Level must be >= 23. Current Api level '${level}'`);
  }
  await this.adbExecEmu(['finger', 'touch', fingerprintId]);
};
emuMethods.rotate = async function rotate() {
  await this.adbExecEmu(['rotate']);
};
emuMethods.powerAC = async function powerAC(state = 'on') {
  if (_lodash.default.values(emuMethods.POWER_AC_STATES).indexOf(state) === -1) {
    throw new TypeError(`Wrong power AC state sent '${state}'. ` + `Supported values: ${_lodash.default.values(emuMethods.POWER_AC_STATES)}]`);
  }
  await this.adbExecEmu(['power', 'ac', state]);
};
emuMethods.sensorSet = async function sensorSet(sensor, value) {
  if (!_lodash.default.includes(emuMethods.SENSORS, sensor)) {
    throw new TypeError(`Unsupported sensor sent '${sensor}'. ` + `Supported values: ${_lodash.default.values(emuMethods.SENSORS)}]`);
  }
  if (_lodash.default.isNil(value) || value === '') {
    throw new TypeError(`Missing/invalid sensor value argument. ` + `You need to provide a valid value to set to the sensor in ` + `format <value-a>[:<value-b>[:<value-c>[...]]].`);
  }
  await this.adbExecEmu(['sensor', 'set', sensor, value]);
};
emuMethods.powerCapacity = async function powerCapacity(percent = 100) {
  percent = parseInt(percent, 10);
  if (isNaN(percent) || percent < 0 || percent > 100) {
    throw new TypeError(`The percentage value should be valid integer between 0 and 100`);
  }
  await this.adbExecEmu(['power', 'capacity', percent]);
};
emuMethods.powerOFF = async function powerOFF() {
  await this.powerAC(emuMethods.POWER_AC_STATES.POWER_AC_OFF);
  await this.powerCapacity(0);
};
emuMethods.sendSMS = async function sendSMS(phoneNumber, message = '') {
  if (_lodash.default.isEmpty(message)) {
    throw new TypeError('SMS message must not be empty');
  }
  if (!_lodash.default.isInteger(phoneNumber) && _lodash.default.isEmpty(phoneNumber)) {
    throw new TypeError('Phone number most not be empty');
  }
  await this.adbExecEmu(['sms', 'send', phoneNumber, message]);
};
emuMethods.gsmCall = async function gsmCall(phoneNumber, action) {
  if (!_lodash.default.values(emuMethods.GSM_CALL_ACTIONS).includes(action)) {
    throw new TypeError(`Invalid gsm action param ${action}. Supported values: ${_lodash.default.values(emuMethods.GSM_CALL_ACTIONS)}`);
  }
  if (!_lodash.default.isInteger(phoneNumber) && _lodash.default.isEmpty(phoneNumber)) {
    throw new TypeError('Phone number most not be empty');
  }
  await this.adbExecEmu(['gsm', action, phoneNumber]);
};
emuMethods.gsmSignal = async function gsmSignal(strength = 4) {
  strength = parseInt(strength, 10);
  if (!emuMethods.GSM_SIGNAL_STRENGTHS.includes(strength)) {
    throw new TypeError(`Invalid signal strength param ${strength}. Supported values: ${_lodash.default.values(emuMethods.GSM_SIGNAL_STRENGTHS)}`);
  }
  _logger.default.info('gsm signal-profile <strength> changes the reported strength on next (15s) update.');
  await this.adbExecEmu(['gsm', 'signal-profile', strength]);
};
emuMethods.gsmVoice = async function gsmVoice(state = 'on') {
  if (!_lodash.default.values(emuMethods.GSM_VOICE_STATES).includes(state)) {
    throw new TypeError(`Invalid gsm voice state param ${state}. Supported values: ${_lodash.default.values(emuMethods.GSM_VOICE_STATES)}`);
  }
  await this.adbExecEmu(['gsm', 'voice', state]);
};
emuMethods.networkSpeed = async function networkSpeed(speed = 'full') {
  if (!_lodash.default.values(emuMethods.NETWORK_SPEED).includes(speed)) {
    throw new Error(`Invalid network speed param ${speed}. Supported values: ${_lodash.default.values(emuMethods.NETWORK_SPEED)}`);
  }
  await this.adbExecEmu(['network', 'speed', speed]);
};
emuMethods.execEmuConsoleCommand = async function execTelnet(cmd, opts = {}) {
  let port = parseInt(opts.port, 10);
  if (!port) {
    const portMatch = /emulator-(\d+)/i.exec(this.curDeviceId);
    if (!portMatch) {
      throw new Error(`Cannot parse the console port number from the device identifier '${this.curDeviceId}'. ` + `Is it an emulator?`);
    }
    port = parseInt(portMatch[1], 10);
  }
  const host = '127.0.0.1';
  const {
    execTimeout = 60000,
    connTimeout = 5000,
    initTimeout = 5000
  } = opts;
  await this.resetTelnetAuthToken();
  const okFlag = /^OK$/m;
  const nokFlag = /^KO\b/m;
  const eol = '\r\n';
  const client = _net.default.connect({
    host,
    port
  });
  return await new _bluebird.default((resolve, reject) => {
    const connTimeoutObj = setTimeout(() => reject(new Error(`Cannot connect to the Emulator console at ${host}:${port} ` + `after ${connTimeout}ms`)), connTimeout);
    let execTimeoutObj;
    let initTimeoutObj;
    let isCommandSent = false;
    let serverResponse = [];
    client.once('error', e => {
      clearTimeout(connTimeoutObj);
      reject(new Error(`Cannot connect to the Emulator console at ${host}:${port}. ` + `Original error: ${e.message}`));
    });
    client.once('connect', () => {
      clearTimeout(connTimeoutObj);
      initTimeoutObj = setTimeout(() => reject(new Error(`Did not get the initial response from the Emulator console at ${host}:${port} ` + `after ${initTimeout}ms`)), initTimeout);
    });
    client.on('data', chunk => {
      serverResponse.push(chunk);
      const output = Buffer.concat(serverResponse).toString('utf8').trim();
      if (okFlag.test(output)) {
        if (!isCommandSent) {
          clearTimeout(initTimeoutObj);
          serverResponse = [];
          const cmdStr = _lodash.default.isArray(cmd) ? _support.util.quote(cmd) : `${cmd}`;
          _logger.default.debug(`Executing Emulator console command: ${cmdStr}`);
          client.write(cmdStr);
          client.write(eol);
          isCommandSent = true;
          execTimeoutObj = setTimeout(() => reject(new Error(`Did not get any response from the Emulator console at ${host}:${port} ` + `to '${cmd}' command after ${execTimeout}ms`)), execTimeout);
          return;
        }
        clearTimeout(execTimeoutObj);
        client.end();
        const outputArr = output.split(eol);
        return resolve(outputArr.slice(0, outputArr.length - 1).join('\n').trim());
      } else if (nokFlag.test(output)) {
        clearTimeout(initTimeoutObj);
        clearTimeout(execTimeoutObj);
        client.end();
        const outputArr = output.split(eol);
        return reject(_lodash.default.trim(_lodash.default.last(outputArr)));
      }
    });
  });
};
emuMethods.getEmuVersionInfo = async function getEmuVersionInfo() {
  const propsPath = _path.default.join(this.sdkRoot, 'emulator', 'source.properties');
  if (!(await _support.fs.exists(propsPath))) {
    return {};
  }
  const content = await _support.fs.readFile(propsPath, 'utf8');
  const revisionMatch = /^Pkg\.Revision=([\d.]+)$/m.exec(content);
  const result = {};
  if (revisionMatch) {
    result.revision = revisionMatch[1];
  }
  const buildIdMatch = /^Pkg\.BuildId=(\d+)$/m.exec(content);
  if (buildIdMatch) {
    result.buildId = parseInt(buildIdMatch[1], 10);
  }
  return result;
};
emuMethods.getEmuImageProperties = async function getEmuImageProperties(avdName) {
  const avds = await listEmulators();
  const avd = avds.find(({
    name
  }) => name === avdName);
  if (!avd) {
    let msg = `Cannot find '${avdName}' emulator. `;
    if (_lodash.default.isEmpty(avds)) {
      msg += `No emulators have been detected on your system`;
    } else {
      msg += `Available avd names are: ${avds.map(({
        name
      }) => name)}`;
    }
    throw new Error(msg);
  }
  return _ini.default.parse(await _support.fs.readFile(avd.config, 'utf8'));
};
emuMethods.checkAvdExist = async function checkAvdExist(avdName) {
  const avds = await listEmulators();
  if (!avds.some(({
    name
  }) => name === avdName)) {
    let msg = `Avd '${avdName}' is not available. `;
    if (_lodash.default.isEmpty(avds)) {
      msg += `No emulators have been detected on your system`;
    } else {
      msg += `Please select your avd name from one of these: '${avds.map(({
        name
      }) => name)}'`;
    }
    throw new Error(msg);
  }
  return true;
};
var _default = emuMethods;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9nZ2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfaGVscGVycyIsIl9sb2Rhc2giLCJfbmV0IiwiX3N1cHBvcnQiLCJfYmx1ZWJpcmQiLCJfcGF0aCIsIl9pbmkiLCJlbXVNZXRob2RzIiwiUE9XRVJfQUNfU1RBVEVTIiwiT2JqZWN0IiwiZnJlZXplIiwiUE9XRVJfQUNfT04iLCJQT1dFUl9BQ19PRkYiLCJHU01fQ0FMTF9BQ1RJT05TIiwiR1NNX0NBTEwiLCJHU01fQUNDRVBUIiwiR1NNX0NBTkNFTCIsIkdTTV9IT0xEIiwiR1NNX1ZPSUNFX1NUQVRFUyIsIkdTTV9WT0lDRV9VTlJFR0lTVEVSRUQiLCJHU01fVk9JQ0VfSE9NRSIsIkdTTV9WT0lDRV9ST0FNSU5HIiwiR1NNX1ZPSUNFX1NFQVJDSElORyIsIkdTTV9WT0lDRV9ERU5JRUQiLCJHU01fVk9JQ0VfT0ZGIiwiR1NNX1ZPSUNFX09OIiwiR1NNX1NJR05BTF9TVFJFTkdUSFMiLCJORVRXT1JLX1NQRUVEIiwiR1NNIiwiU0NTRCIsIkdQUlMiLCJFREdFIiwiVU1UUyIsIkhTRFBBIiwiTFRFIiwiRVZETyIsIkZVTEwiLCJTRU5TT1JTIiwiQUNDRUxFUkFUSU9OIiwiR1lST1NDT1BFIiwiTUFHTkVUSUNfRklFTEQiLCJPUklFTlRBVElPTiIsIlRFTVBFUkFUVVJFIiwiUFJPWElNSVRZIiwiTElHSFQiLCJQUkVTU1VSRSIsIkhVTUlESVRZIiwiTUFHTkVUSUNfRklFTERfVU5DQUxJQlJBVEVEIiwiR1lST1NDT1BFX1VOQ0FMSUJSQVRFRCIsIkhJTkdFX0FOR0xFMCIsIkhJTkdFX0FOR0xFMSIsIkhJTkdFX0FOR0xFMiIsIkhFQVJUX1JBVEUiLCJSR0JDX0xJR0hUIiwibGlzdEVtdWxhdG9ycyIsImF2ZHNSb290IiwicHJvY2VzcyIsImVudiIsIkFORFJPSURfQVZEX0hPTUUiLCJkaXJFeGlzdHMiLCJnZXRBdmRDb25maWdQYXRocyIsImxvZyIsIndhcm4iLCJwcmVmc1Jvb3QiLCJnZXRBbmRyb2lkUHJlZnNSb290IiwicGF0aCIsInJlc29sdmUiLCJkZWJ1ZyIsImNvbmZpZ3MiLCJmcyIsImdsb2IiLCJjd2QiLCJhYnNvbHV0ZSIsIm1hcCIsImNvbmZQYXRoIiwiYXZkTmFtZSIsImJhc2VuYW1lIiwic3BsaXQiLCJzbGljZSIsImpvaW4iLCJuYW1lIiwiY29uZmlnIiwiZmlsdGVyIiwiXyIsInRyaW0iLCJpc0VtdWxhdG9yQ29ubmVjdGVkIiwiZW11bGF0b3JzIiwiZ2V0Q29ubmVjdGVkRW11bGF0b3JzIiwiZmluZCIsIngiLCJ1ZGlkIiwiY3VyRGV2aWNlSWQiLCJ2ZXJpZnlFbXVsYXRvckNvbm5lY3RlZCIsIkVycm9yIiwiZmluZ2VycHJpbnQiLCJmaW5nZXJwcmludElkIiwibGV2ZWwiLCJnZXRBcGlMZXZlbCIsImFkYkV4ZWNFbXUiLCJyb3RhdGUiLCJwb3dlckFDIiwic3RhdGUiLCJ2YWx1ZXMiLCJpbmRleE9mIiwiVHlwZUVycm9yIiwic2Vuc29yU2V0Iiwic2Vuc29yIiwidmFsdWUiLCJpbmNsdWRlcyIsImlzTmlsIiwicG93ZXJDYXBhY2l0eSIsInBlcmNlbnQiLCJwYXJzZUludCIsImlzTmFOIiwicG93ZXJPRkYiLCJzZW5kU01TIiwicGhvbmVOdW1iZXIiLCJtZXNzYWdlIiwiaXNFbXB0eSIsImlzSW50ZWdlciIsImdzbUNhbGwiLCJhY3Rpb24iLCJnc21TaWduYWwiLCJzdHJlbmd0aCIsImluZm8iLCJnc21Wb2ljZSIsIm5ldHdvcmtTcGVlZCIsInNwZWVkIiwiZXhlY0VtdUNvbnNvbGVDb21tYW5kIiwiZXhlY1RlbG5ldCIsImNtZCIsIm9wdHMiLCJwb3J0IiwicG9ydE1hdGNoIiwiZXhlYyIsImhvc3QiLCJleGVjVGltZW91dCIsImNvbm5UaW1lb3V0IiwiaW5pdFRpbWVvdXQiLCJyZXNldFRlbG5ldEF1dGhUb2tlbiIsIm9rRmxhZyIsIm5va0ZsYWciLCJlb2wiLCJjbGllbnQiLCJuZXQiLCJjb25uZWN0IiwiQiIsInJlamVjdCIsImNvbm5UaW1lb3V0T2JqIiwic2V0VGltZW91dCIsImV4ZWNUaW1lb3V0T2JqIiwiaW5pdFRpbWVvdXRPYmoiLCJpc0NvbW1hbmRTZW50Iiwic2VydmVyUmVzcG9uc2UiLCJvbmNlIiwiZSIsImNsZWFyVGltZW91dCIsIm9uIiwiY2h1bmsiLCJwdXNoIiwib3V0cHV0IiwiQnVmZmVyIiwiY29uY2F0IiwidG9TdHJpbmciLCJ0ZXN0IiwiY21kU3RyIiwiaXNBcnJheSIsInV0aWwiLCJxdW90ZSIsIndyaXRlIiwiZW5kIiwib3V0cHV0QXJyIiwibGVuZ3RoIiwibGFzdCIsImdldEVtdVZlcnNpb25JbmZvIiwicHJvcHNQYXRoIiwic2RrUm9vdCIsImV4aXN0cyIsImNvbnRlbnQiLCJyZWFkRmlsZSIsInJldmlzaW9uTWF0Y2giLCJyZXN1bHQiLCJyZXZpc2lvbiIsImJ1aWxkSWRNYXRjaCIsImJ1aWxkSWQiLCJnZXRFbXVJbWFnZVByb3BlcnRpZXMiLCJhdmRzIiwiYXZkIiwibXNnIiwiaW5pIiwicGFyc2UiLCJjaGVja0F2ZEV4aXN0Iiwic29tZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvdG9vbHMvYWRiLWVtdS1jb21tYW5kcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nIGZyb20gJy4uL2xvZ2dlci5qcyc7XG5pbXBvcnQgeyBnZXRBbmRyb2lkUHJlZnNSb290LCBkaXJFeGlzdHMgfSBmcm9tICcuLi9oZWxwZXJzJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgbmV0IGZyb20gJ25ldCc7XG5pbXBvcnQgeyB1dGlsLCBmcyB9IGZyb20gJ0BhcHBpdW0vc3VwcG9ydCc7XG5pbXBvcnQgQiBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBpbmkgZnJvbSAnaW5pJztcblxuY29uc3QgZW11TWV0aG9kcyA9IHt9O1xuZW11TWV0aG9kcy5QT1dFUl9BQ19TVEFURVMgPSBPYmplY3QuZnJlZXplKHtcbiAgUE9XRVJfQUNfT046ICdvbicsXG4gIFBPV0VSX0FDX09GRjogJ29mZidcbn0pO1xuZW11TWV0aG9kcy5HU01fQ0FMTF9BQ1RJT05TID0gT2JqZWN0LmZyZWV6ZSh7XG4gIEdTTV9DQUxMOiAnY2FsbCcsXG4gIEdTTV9BQ0NFUFQ6ICdhY2NlcHQnLFxuICBHU01fQ0FOQ0VMOiAnY2FuY2VsJyxcbiAgR1NNX0hPTEQ6ICdob2xkJ1xufSk7XG5lbXVNZXRob2RzLkdTTV9WT0lDRV9TVEFURVMgPSBPYmplY3QuZnJlZXplKHtcbiAgR1NNX1ZPSUNFX1VOUkVHSVNURVJFRDogJ3VucmVnaXN0ZXJlZCcsXG4gIEdTTV9WT0lDRV9IT01FOiAnaG9tZScsXG4gIEdTTV9WT0lDRV9ST0FNSU5HOiAncm9hbWluZycsXG4gIEdTTV9WT0lDRV9TRUFSQ0hJTkc6ICdzZWFyY2hpbmcnLFxuICBHU01fVk9JQ0VfREVOSUVEOiAnZGVuaWVkJyxcbiAgR1NNX1ZPSUNFX09GRjogJ29mZicsXG4gIEdTTV9WT0lDRV9PTjogJ29uJ1xufSk7XG5lbXVNZXRob2RzLkdTTV9TSUdOQUxfU1RSRU5HVEhTID0gWzAsIDEsIDIsIDMsIDRdO1xuXG5lbXVNZXRob2RzLk5FVFdPUktfU1BFRUQgPSBPYmplY3QuZnJlZXplKHtcbiAgR1NNOiAnZ3NtJywgLy8gR1NNL0NTRCAodXA6IDE0LjQsIGRvd246IDE0LjQpLlxuICBTQ1NEOiAnc2NzZCcsIC8vIEhTQ1NEICh1cDogMTQuNCwgZG93bjogNTcuNikuXG4gIEdQUlM6ICdncHJzJywgLy8gR1BSUyAodXA6IDI4LjgsIGRvd246IDU3LjYpLlxuICBFREdFOiAnZWRnZScsIC8vIEVER0UvRUdQUlMgKHVwOiA0NzMuNiwgZG93bjogNDczLjYpLlxuICBVTVRTOiAndW10cycsIC8vIFVNVFMvM0cgKHVwOiAzODQuMCwgZG93bjogMzg0LjApLlxuICBIU0RQQTogJ2hzZHBhJywgLy8gSFNEUEEgKHVwOiA1NzYwLjAsIGRvd246IDEzLDk4MC4wKS5cbiAgTFRFOiAnbHRlJywgLy8gTFRFICh1cDogNTgsMDAwLCBkb3duOiAxNzMsMDAwKS5cbiAgRVZETzogJ2V2ZG8nLCAvLyBFVkRPICh1cDogNzUsMDAwLCBkb3duOiAyODAsMDAwKS5cbiAgRlVMTDogJ2Z1bGwnIC8vIE5vIGxpbWl0LCB0aGUgZGVmYXVsdCAodXA6IDAuMCwgZG93bjogMC4wKS5cbn0pO1xuXG5lbXVNZXRob2RzLlNFTlNPUlMgPSBPYmplY3QuZnJlZXplKHtcbiAgQUNDRUxFUkFUSU9OOiAnYWNjZWxlcmF0aW9uJyxcbiAgR1lST1NDT1BFOiAnZ3lyb3Njb3BlJyxcbiAgTUFHTkVUSUNfRklFTEQ6ICdtYWduZXRpYy1maWVsZCcsXG4gIE9SSUVOVEFUSU9OOiAnb3JpZW50YXRpb24nLFxuICBURU1QRVJBVFVSRTogJ3RlbXBlcmF0dXJlJyxcbiAgUFJPWElNSVRZOiAncHJveGltaXR5JyxcbiAgTElHSFQ6ICdsaWdodCcsXG4gIFBSRVNTVVJFOiAncHJlc3N1cmUnLFxuICBIVU1JRElUWTogJ2h1bWlkaXR5JyxcbiAgTUFHTkVUSUNfRklFTERfVU5DQUxJQlJBVEVEOiAnbWFnbmV0aWMtZmllbGQtdW5jYWxpYnJhdGVkJyxcbiAgR1lST1NDT1BFX1VOQ0FMSUJSQVRFRDogJ2d5cm9zY29wZS11bmNhbGlicmF0ZWQnLFxuICBISU5HRV9BTkdMRTA6ICdoaW5nZS1hbmdsZTAnLFxuICBISU5HRV9BTkdMRTE6ICdoaW5nZS1hbmdsZTEnLFxuICBISU5HRV9BTkdMRTI6ICdoaW5nZS1hbmdsZTInLFxuICBIRUFSVF9SQVRFOiAnaGVhcnQtcmF0ZScsXG4gIFJHQkNfTElHSFQ6ICdyZ2JjLWxpZ2h0Jyxcbn0pO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEVtdUluZm9cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBuYW1lIEVtdWxhdG9yIG5hbWUsIGZvciBleGFtcGxlIGBQaXhlbF9YTF9BUElfMzBgXG4gKiBAcHJvcGVydHkge3N0cmluZ30gY29uZmlnIEZ1bGwgcGF0aCB0byB0aGUgZW11bGF0b3IgY29uZmlnIC5pbmkgZmlsZSxcbiAqIGZvciBleGFtcGxlIGAvVXNlcnMvdXNlci8uYW5kcm9pZC9hdmQvUGl4ZWxfWExfQVBJXzMwLmluaWBcbiAqL1xuXG4vKipcbiAqIFJldHJpZXZlcyB0aGUgbGlzdCBvZiBhdmFpbGFibGUgQW5kcm9pZCBlbXVsYXRvcnNcbiAqXG4gKiBAcmV0dXJucyB7QXJyYXk8RW11SW5mbz59XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGxpc3RFbXVsYXRvcnMgKCkge1xuICBsZXQgYXZkc1Jvb3QgPSBwcm9jZXNzLmVudi5BTkRST0lEX0FWRF9IT01FO1xuICBpZiAoYXdhaXQgZGlyRXhpc3RzKGF2ZHNSb290KSkge1xuICAgIHJldHVybiBhd2FpdCBnZXRBdmRDb25maWdQYXRocyhhdmRzUm9vdCk7XG4gIH1cblxuICBpZiAoYXZkc1Jvb3QpIHtcbiAgICBsb2cud2FybihgVGhlIHZhbHVlIG9mIHRoZSBBTkRST0lEX0FWRF9IT01FIGVudmlyb25tZW50IHZhcmlhYmxlICcke2F2ZHNSb290fScgaXMgbm90IGFuIGV4aXN0aW5nIGRpcmVjdG9yeWApO1xuICB9XG5cbiAgY29uc3QgcHJlZnNSb290ID0gYXdhaXQgZ2V0QW5kcm9pZFByZWZzUm9vdCgpO1xuICBpZiAoIXByZWZzUm9vdCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGF2ZHNSb290ID0gcGF0aC5yZXNvbHZlKHByZWZzUm9vdCwgJ2F2ZCcpO1xuICBpZiAoIWF3YWl0IGRpckV4aXN0cyhhdmRzUm9vdCkpIHtcbiAgICBsb2cuZGVidWcoYFZpcnR1YWwgZGV2aWNlcyBjb25maWcgcm9vdCAnJHthdmRzUm9vdH0nIGlzIG5vdCBhbiBleGlzdGluZyBkaXJlY3RvcnlgKTtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICByZXR1cm4gYXdhaXQgZ2V0QXZkQ29uZmlnUGF0aHMoYXZkc1Jvb3QpO1xufVxuXG4vKipcbiAqIEdldCBjb25maWd1cmF0aW9uIHBhdGhzIG9mIGFsbCB2aXJ0dWFsIGRldmljZXNcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYXZkc1Jvb3QgUGF0aCB0byB0aGUgZGlyZWN0b3J5IHRoYXQgY29udGFpbnMgdGhlIEFWRCAuaW5pIGZpbGVzXG4gKiBAcmV0dXJucyB7QXJyYXk8RW11SW5mbz59XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldEF2ZENvbmZpZ1BhdGhzIChhdmRzUm9vdCkge1xuICBjb25zdCBjb25maWdzID0gYXdhaXQgZnMuZ2xvYignKi5pbmknLCB7XG4gICAgY3dkOiBhdmRzUm9vdCxcbiAgICBhYnNvbHV0ZTogdHJ1ZSxcbiAgfSk7XG4gIHJldHVybiBjb25maWdzLm1hcCgoY29uZlBhdGgpID0+IHtcbiAgICBjb25zdCBhdmROYW1lID0gcGF0aC5iYXNlbmFtZShjb25mUGF0aCkuc3BsaXQoJy4nKS5zbGljZSgwLCAtMSkuam9pbignLicpO1xuICAgIHJldHVybiB7bmFtZTogYXZkTmFtZSwgY29uZmlnOiBjb25mUGF0aH07XG4gIH0pLmZpbHRlcigoe25hbWV9KSA9PiBfLnRyaW0obmFtZSkpO1xufVxuXG4vKipcbiAqIENoZWNrIHRoZSBlbXVsYXRvciBzdGF0ZS5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIEVtdWxhdG9yIGlzIHZpc2libGUgdG8gYWRiLlxuICovXG5lbXVNZXRob2RzLmlzRW11bGF0b3JDb25uZWN0ZWQgPSBhc3luYyBmdW5jdGlvbiBpc0VtdWxhdG9yQ29ubmVjdGVkICgpIHtcbiAgbGV0IGVtdWxhdG9ycyA9IGF3YWl0IHRoaXMuZ2V0Q29ubmVjdGVkRW11bGF0b3JzKCk7XG4gIHJldHVybiAhIV8uZmluZChlbXVsYXRvcnMsICh4KSA9PiB4ICYmIHgudWRpZCA9PT0gdGhpcy5jdXJEZXZpY2VJZCk7XG59O1xuXG4vKipcbiAqIFZlcmlmeSB0aGUgZW11bGF0b3IgaXMgY29ubmVjdGVkLlxuICpcbiAqIEB0aHJvd3Mge2Vycm9yfSBJZiBFbXVsYXRvciBpcyBub3QgdmlzaWJsZSB0byBhZGIuXG4gKi9cbmVtdU1ldGhvZHMudmVyaWZ5RW11bGF0b3JDb25uZWN0ZWQgPSBhc3luYyBmdW5jdGlvbiB2ZXJpZnlFbXVsYXRvckNvbm5lY3RlZCAoKSB7XG4gIGlmICghKGF3YWl0IHRoaXMuaXNFbXVsYXRvckNvbm5lY3RlZCgpKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVGhlIGVtdWxhdG9yIFwiJHt0aGlzLmN1ckRldmljZUlkfVwiIHdhcyB1bmV4cGVjdGVkbHkgZGlzY29ubmVjdGVkYCk7XG4gIH1cbn07XG5cbi8qKlxuICogRW11bGF0ZSBmaW5nZXJwcmludCB0b3VjaCBldmVudCBvbiB0aGUgY29ubmVjdGVkIGVtdWxhdG9yLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaW5nZXJwcmludElkIC0gVGhlIElEIG9mIHRoZSBmaW5nZXJwcmludC5cbiAqL1xuZW11TWV0aG9kcy5maW5nZXJwcmludCA9IGFzeW5jIGZ1bmN0aW9uIGZpbmdlcnByaW50IChmaW5nZXJwcmludElkKSB7XG4gIGlmICghZmluZ2VycHJpbnRJZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignRmluZ2VycHJpbnQgaWQgcGFyYW1ldGVyIG11c3QgYmUgZGVmaW5lZCcpO1xuICB9XG4gIC8vIHRoZSBtZXRob2QgdXNlZCBvbmx5IHdvcmtzIGZvciBBUEkgbGV2ZWwgMjMgYW5kIGFib3ZlXG4gIGxldCBsZXZlbCA9IGF3YWl0IHRoaXMuZ2V0QXBpTGV2ZWwoKTtcbiAgaWYgKGxldmVsIDwgMjMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYERldmljZSBBUEkgTGV2ZWwgbXVzdCBiZSA+PSAyMy4gQ3VycmVudCBBcGkgbGV2ZWwgJyR7bGV2ZWx9J2ApO1xuICB9XG4gIGF3YWl0IHRoaXMuYWRiRXhlY0VtdShbJ2ZpbmdlcicsICd0b3VjaCcsIGZpbmdlcnByaW50SWRdKTtcbn07XG5cbi8qKlxuICogQ2hhbmdlIHRoZSBkaXNwbGF5IG9yaWVudGF0aW9uIG9uIHRoZSBjb25uZWN0ZWQgZW11bGF0b3IuXG4gKiBUaGUgb3JpZW50YXRpb24gaXMgY2hhbmdlZCAoUEkvMiBpcyBhZGRlZCkgZXZlcnkgdGltZVxuICogdGhpcyBtZXRob2QgaXMgY2FsbGVkLlxuICovXG5lbXVNZXRob2RzLnJvdGF0ZSA9IGFzeW5jIGZ1bmN0aW9uIHJvdGF0ZSAoKSB7XG4gIGF3YWl0IHRoaXMuYWRiRXhlY0VtdShbJ3JvdGF0ZSddKTtcbn07XG5cbi8qKlxuICogRW11bGF0ZSBwb3dlciBzdGF0ZSBjaGFuZ2Ugb24gdGhlIGNvbm5lY3RlZCBlbXVsYXRvci5cbiAqXG4gKiBAcGFyYW0ge29ufG9mZn0gc3RhdGUgWydvbiddIC0gRWl0aGVyICdvbicgb3IgJ29mZicuXG4gKi9cbmVtdU1ldGhvZHMucG93ZXJBQyA9IGFzeW5jIGZ1bmN0aW9uIHBvd2VyQUMgKHN0YXRlID0gJ29uJykge1xuICBpZiAoXy52YWx1ZXMoZW11TWV0aG9kcy5QT1dFUl9BQ19TVEFURVMpLmluZGV4T2Yoc3RhdGUpID09PSAtMSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFdyb25nIHBvd2VyIEFDIHN0YXRlIHNlbnQgJyR7c3RhdGV9Jy4gYFxuICAgICAgKyBgU3VwcG9ydGVkIHZhbHVlczogJHtfLnZhbHVlcyhlbXVNZXRob2RzLlBPV0VSX0FDX1NUQVRFUyl9XWApO1xuICB9XG4gIGF3YWl0IHRoaXMuYWRiRXhlY0VtdShbJ3Bvd2VyJywgJ2FjJywgc3RhdGVdKTtcbn07XG5cbi8qKlxuICogRW11bGF0ZSBzZW5zb3JzIHZhbHVlcyBvbiB0aGUgY29ubmVjdGVkIGVtdWxhdG9yLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZW5zb3IgLSBTZW5zb3IgdHlwZSBkZWNsYXJlZCBpbiBTRU5TT1JTIGl0ZW1zLlxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSB2YWx1ZSAgLSBOdW1iZXIgdG8gc2V0IGFzIHRoZSBzZW5zb3IgdmFsdWUuXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IC0gSWYgc2Vuc29yIHR5cGUgb3Igc2Vuc29yIHZhbHVlIGlzIG5vdCBkZWZpbmVkXG4gKi9cbmVtdU1ldGhvZHMuc2Vuc29yU2V0ID0gYXN5bmMgZnVuY3Rpb24gc2Vuc29yU2V0IChzZW5zb3IsIHZhbHVlKSB7XG4gIGlmICghXy5pbmNsdWRlcyhlbXVNZXRob2RzLlNFTlNPUlMsIHNlbnNvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBVbnN1cHBvcnRlZCBzZW5zb3Igc2VudCAnJHtzZW5zb3J9Jy4gYFxuICAgICAgKyBgU3VwcG9ydGVkIHZhbHVlczogJHtfLnZhbHVlcyhlbXVNZXRob2RzLlNFTlNPUlMpfV1gKTtcbiAgfVxuICBpZiAoXy5pc05pbCh2YWx1ZSkgfHwgdmFsdWUgPT09ICcnKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgTWlzc2luZy9pbnZhbGlkIHNlbnNvciB2YWx1ZSBhcmd1bWVudC4gYFxuICAgICAgKyBgWW91IG5lZWQgdG8gcHJvdmlkZSBhIHZhbGlkIHZhbHVlIHRvIHNldCB0byB0aGUgc2Vuc29yIGluIGBcbiAgICAgICsgYGZvcm1hdCA8dmFsdWUtYT5bOjx2YWx1ZS1iPls6PHZhbHVlLWM+Wy4uLl1dXS5gKTtcbiAgfVxuICBhd2FpdCB0aGlzLmFkYkV4ZWNFbXUoWydzZW5zb3InLCAnc2V0Jywgc2Vuc29yLCB2YWx1ZV0pO1xufTtcblxuLyoqXG4gKiBFbXVsYXRlIHBvd2VyIGNhcGFjaXR5IGNoYW5nZSBvbiB0aGUgY29ubmVjdGVkIGVtdWxhdG9yLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gcGVyY2VudCBbMTAwXSAtIFBlcmNlbnRhZ2UgdmFsdWUgaW4gcmFuZ2UgWzAsIDEwMF0uXG4gKi9cbmVtdU1ldGhvZHMucG93ZXJDYXBhY2l0eSA9IGFzeW5jIGZ1bmN0aW9uIHBvd2VyQ2FwYWNpdHkgKHBlcmNlbnQgPSAxMDApIHtcbiAgcGVyY2VudCA9IHBhcnNlSW50KHBlcmNlbnQsIDEwKTtcbiAgaWYgKGlzTmFOKHBlcmNlbnQpIHx8IHBlcmNlbnQgPCAwIHx8IHBlcmNlbnQgPiAxMDApIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBUaGUgcGVyY2VudGFnZSB2YWx1ZSBzaG91bGQgYmUgdmFsaWQgaW50ZWdlciBiZXR3ZWVuIDAgYW5kIDEwMGApO1xuICB9XG4gIGF3YWl0IHRoaXMuYWRiRXhlY0VtdShbJ3Bvd2VyJywgJ2NhcGFjaXR5JywgcGVyY2VudF0pO1xufTtcblxuLyoqXG4gKiBFbXVsYXRlIHBvd2VyIG9mZiBldmVudCBvbiB0aGUgY29ubmVjdGVkIGVtdWxhdG9yLlxuICovXG5lbXVNZXRob2RzLnBvd2VyT0ZGID0gYXN5bmMgZnVuY3Rpb24gcG93ZXJPRkYgKCkge1xuICBhd2FpdCB0aGlzLnBvd2VyQUMoZW11TWV0aG9kcy5QT1dFUl9BQ19TVEFURVMuUE9XRVJfQUNfT0ZGKTtcbiAgYXdhaXQgdGhpcy5wb3dlckNhcGFjaXR5KDApO1xufTtcblxuLyoqXG4gKiBFbXVsYXRlIHNlbmQgU01TIGV2ZW50IG9uIHRoZSBjb25uZWN0ZWQgZW11bGF0b3IuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBwaG9uZU51bWJlciAtIFRoZSBwaG9uZSBudW1iZXIgb2YgbWVzc2FnZSBzZW5kZXIuXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBbJyddIC0gVGhlIG1lc3NhZ2UgY29udGVudC5cbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gSWYgcGhvbmUgbnVtYmVyIGhhcyBpbnZhbGlkIGZvcm1hdC5cbiAqL1xuZW11TWV0aG9kcy5zZW5kU01TID0gYXN5bmMgZnVuY3Rpb24gc2VuZFNNUyAocGhvbmVOdW1iZXIsIG1lc3NhZ2UgPSAnJykge1xuICBpZiAoXy5pc0VtcHR5KG1lc3NhZ2UpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignU01TIG1lc3NhZ2UgbXVzdCBub3QgYmUgZW1wdHknKTtcbiAgfVxuICBpZiAoIV8uaXNJbnRlZ2VyKHBob25lTnVtYmVyKSAmJiBfLmlzRW1wdHkocGhvbmVOdW1iZXIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUGhvbmUgbnVtYmVyIG1vc3Qgbm90IGJlIGVtcHR5Jyk7XG4gIH1cbiAgYXdhaXQgdGhpcy5hZGJFeGVjRW11KFsnc21zJywgJ3NlbmQnLCBwaG9uZU51bWJlciwgbWVzc2FnZV0pO1xufTtcblxuLyoqXG4gKiBFbXVsYXRlIEdTTSBjYWxsIGV2ZW50IG9uIHRoZSBjb25uZWN0ZWQgZW11bGF0b3IuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBwaG9uZU51bWJlciAtIFRoZSBwaG9uZSBudW1iZXIgb2YgdGhlIGNhbGxlci5cbiAqIEBwYXJhbSB7Y2FsbHxhY2NlcHR8Y2FuY2VsfGhvbGR9IGFjdGlvbiAtIE9uZSBvZiBhdmFpbGFibGUgR1NNIGNhbGwgYWN0aW9ucy5cbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gSWYgcGhvbmUgbnVtYmVyIGhhcyBpbnZhbGlkIGZvcm1hdC5cbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gSWYgX2FjdGlvbl8gdmFsdWUgaXMgaW52YWxpZC5cbiAqL1xuZW11TWV0aG9kcy5nc21DYWxsID0gYXN5bmMgZnVuY3Rpb24gZ3NtQ2FsbCAocGhvbmVOdW1iZXIsIGFjdGlvbikge1xuICBpZiAoIV8udmFsdWVzKGVtdU1ldGhvZHMuR1NNX0NBTExfQUNUSU9OUykuaW5jbHVkZXMoYWN0aW9uKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICBgSW52YWxpZCBnc20gYWN0aW9uIHBhcmFtICR7YWN0aW9ufS4gU3VwcG9ydGVkIHZhbHVlczogJHtfLnZhbHVlcyhlbXVNZXRob2RzLkdTTV9DQUxMX0FDVElPTlMpfWBcbiAgICApO1xuICB9XG4gIGlmICghXy5pc0ludGVnZXIocGhvbmVOdW1iZXIpICYmIF8uaXNFbXB0eShwaG9uZU51bWJlcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQaG9uZSBudW1iZXIgbW9zdCBub3QgYmUgZW1wdHknKTtcbiAgfVxuICBhd2FpdCB0aGlzLmFkYkV4ZWNFbXUoWydnc20nLCBhY3Rpb24sIHBob25lTnVtYmVyXSk7XG59O1xuXG4vKipcbiAqIEVtdWxhdGUgR1NNIHNpZ25hbCBzdHJlbmd0aCBjaGFuZ2UgZXZlbnQgb24gdGhlIGNvbm5lY3RlZCBlbXVsYXRvci5cbiAqXG4gKiBAcGFyYW0gezB8MXwyfDN8NH0gc3RyZW5ndGggWzRdIC0gQSBudW1iZXIgaW4gcmFuZ2UgWzAsIDRdO1xuICogQHRocm93cyB7VHlwZUVycm9yfSBJZiBfc3RyZW5ndGhfIHZhbHVlIGlzIGludmFsaWQuXG4gKi9cbmVtdU1ldGhvZHMuZ3NtU2lnbmFsID0gYXN5bmMgZnVuY3Rpb24gZ3NtU2lnbmFsIChzdHJlbmd0aCA9IDQpIHtcbiAgc3RyZW5ndGggPSBwYXJzZUludChzdHJlbmd0aCwgMTApO1xuICBpZiAoIWVtdU1ldGhvZHMuR1NNX1NJR05BTF9TVFJFTkdUSFMuaW5jbHVkZXMoc3RyZW5ndGgpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgIGBJbnZhbGlkIHNpZ25hbCBzdHJlbmd0aCBwYXJhbSAke3N0cmVuZ3RofS4gU3VwcG9ydGVkIHZhbHVlczogJHtfLnZhbHVlcyhlbXVNZXRob2RzLkdTTV9TSUdOQUxfU1RSRU5HVEhTKX1gXG4gICAgKTtcbiAgfVxuICBsb2cuaW5mbygnZ3NtIHNpZ25hbC1wcm9maWxlIDxzdHJlbmd0aD4gY2hhbmdlcyB0aGUgcmVwb3J0ZWQgc3RyZW5ndGggb24gbmV4dCAoMTVzKSB1cGRhdGUuJyk7XG4gIGF3YWl0IHRoaXMuYWRiRXhlY0VtdShbJ2dzbScsICdzaWduYWwtcHJvZmlsZScsIHN0cmVuZ3RoXSk7XG59O1xuXG4vKipcbiAqIEVtdWxhdGUgR1NNIHZvaWNlIGV2ZW50IG9uIHRoZSBjb25uZWN0ZWQgZW11bGF0b3IuXG4gKlxuICogQHBhcmFtIHt1bnJlZ2lzdGVyZWR8aG9tZXxyb2FtaW5nfHNlYXJjaGluZ3xkZW5pZWR8b258b2ZmfSBzdGF0ZSBbJ29uJ10gLSBFaXRoZXIgJ29uJyBvciAnb2ZmJy5cbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gSWYgX3N0YXRlXyB2YWx1ZSBpcyBpbnZhbGlkLlxuICovXG5lbXVNZXRob2RzLmdzbVZvaWNlID0gYXN5bmMgZnVuY3Rpb24gZ3NtVm9pY2UgKHN0YXRlID0gJ29uJykge1xuICAvLyBnc20gdm9pY2UgPHN0YXRlPiBhbGxvd3MgeW91IHRvIGNoYW5nZSB0aGUgc3RhdGUgb2YgeW91ciBHUFJTIGNvbm5lY3Rpb25cbiAgaWYgKCFfLnZhbHVlcyhlbXVNZXRob2RzLkdTTV9WT0lDRV9TVEFURVMpLmluY2x1ZGVzKHN0YXRlKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICBgSW52YWxpZCBnc20gdm9pY2Ugc3RhdGUgcGFyYW0gJHtzdGF0ZX0uIFN1cHBvcnRlZCB2YWx1ZXM6ICR7Xy52YWx1ZXMoZW11TWV0aG9kcy5HU01fVk9JQ0VfU1RBVEVTKX1gXG4gICAgKTtcbiAgfVxuICBhd2FpdCB0aGlzLmFkYkV4ZWNFbXUoWydnc20nLCAndm9pY2UnLCBzdGF0ZV0pO1xufTtcblxuLyoqXG4gKiBFbXVsYXRlIG5ldHdvcmsgc3BlZWQgY2hhbmdlIGV2ZW50IG9uIHRoZSBjb25uZWN0ZWQgZW11bGF0b3IuXG4gKlxuICogQHBhcmFtIHtnc218c2NzZHxncHJzfGVkZ2V8dW10c3xoc3BkYXxsdGV8ZXZkb3xmdWxsfSBzcGVlZCBbJ2Z1bGwnXSAtIE9uZSBvZiBwb3NzaWJsZSBORVRXT1JLX1NQRUVEIHZhbHVlcy5cbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gSWYgX3NwZWVkXyB2YWx1ZSBpcyBpbnZhbGlkLlxuICovXG5lbXVNZXRob2RzLm5ldHdvcmtTcGVlZCA9IGFzeW5jIGZ1bmN0aW9uIG5ldHdvcmtTcGVlZCAoc3BlZWQgPSAnZnVsbCcpIHtcbiAgLy8gbmV0d29yayBzcGVlZCA8c3BlZWQ+IGFsbG93cyB5b3UgdG8gc2V0IHRoZSBuZXR3b3JrIHNwZWVkIGVtdWxhdGlvbi5cbiAgaWYgKCFfLnZhbHVlcyhlbXVNZXRob2RzLk5FVFdPUktfU1BFRUQpLmluY2x1ZGVzKHNwZWVkKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJbnZhbGlkIG5ldHdvcmsgc3BlZWQgcGFyYW0gJHtzcGVlZH0uIFN1cHBvcnRlZCB2YWx1ZXM6ICR7Xy52YWx1ZXMoZW11TWV0aG9kcy5ORVRXT1JLX1NQRUVEKX1gXG4gICAgKTtcbiAgfVxuICBhd2FpdCB0aGlzLmFkYkV4ZWNFbXUoWyduZXR3b3JrJywgJ3NwZWVkJywgc3BlZWRdKTtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRXhlY1RlbG5ldE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBleGVjVGltZW91dCBbNjAwMDBdIEEgdGltZW91dCB1c2VkIHRvIHdhaXQgZm9yIGEgc2VydmVyXG4gKiByZXBseSB0byB0aGUgZ2l2ZW4gY29tbWFuZFxuICogQHByb3BlcnR5IHtudW1iZXJ9IGNvbm5UaW1lb3V0IFs1MDAwXSBDb25zb2xlIGNvbm5lY3Rpb24gdGltZW91dCBpbiBtaWxsaXNlY29uZHNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBpbml0VGltZW91dCBbNTAwMF0gVGVsbmV0IGNvbnNvbGUgaW5pdGlhbGl6YXRpb24gdGltZW91dFxuICogaW4gbWlsbGlzZWNvbmRzICh0aGUgdGltZSBiZXR3ZWVuIGNvbm5lY3Rpb24gaGFwcGVucyBhbmQgdGhlIGNvbW1hbmQgcHJvbXB0XG4gKiBpcyBhdmFpbGFibGUpXG4gKiBAcHJvcGVydHkgez9udW1iZXJ8c3RyaW5nfSBwb3J0IFRoZSBlbXVsYXRvciBwb3J0IG51bWJlci4gVGhlIG1ldGhvZCB3aWxsIHRyeSB0byBwYXJzZSBpdFxuICogZnJvbSB0aGUgY3VycmVudCBkZXZpY2UgaWRlbnRpZmllciBpZiB1bnNldFxuICovXG5cbi8qKlxuICogRXhlY3V0ZXMgYSBjb21tYW5kIHRocm91Z2ggZW11bGF0b3IgdGVsbmV0IGNvbnNvbGUgaW50ZXJmYWNlIGFuZCByZXR1cm5zIGl0cyBvdXRwdXRcbiAqXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz58c3RyaW5nfSBjbWQgLSBUaGUgYWN0dWFsIGNvbW1hbmQgdG8gZXhlY3V0ZS4gU2VlXG4gKiBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9zdHVkaW8vcnVuL2VtdWxhdG9yLWNvbnNvbGUgZm9yIG1vcmUgZGV0YWlsc1xuICogb24gYXZhaWxhYmxlIGNvbW1hbmRzXG4gKiBAcGFyYW0ge0V4ZWNUZWxuZXRPcHRpb25zfSBvcHRzXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tbWFuZCBvdXRwdXRcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGVyZSB3YXMgYW4gZXJyb3Igd2hpbGUgY29ubmVjdGluZyB0byB0aGUgVGVsbmV0IGNvbnNvbGVcbiAqIG9yIGlmIHRoZSBnaXZlbiBjb21tYW5kIHJldHVybmVkIG5vbi1PSyByZXNwb25zZVxuICovXG5lbXVNZXRob2RzLmV4ZWNFbXVDb25zb2xlQ29tbWFuZCA9IGFzeW5jIGZ1bmN0aW9uIGV4ZWNUZWxuZXQgKGNtZCwgb3B0cyA9IHt9KSB7XG4gIGxldCBwb3J0ID0gcGFyc2VJbnQob3B0cy5wb3J0LCAxMCk7XG4gIGlmICghcG9ydCkge1xuICAgIGNvbnN0IHBvcnRNYXRjaCA9IC9lbXVsYXRvci0oXFxkKykvaS5leGVjKHRoaXMuY3VyRGV2aWNlSWQpO1xuICAgIGlmICghcG9ydE1hdGNoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBwYXJzZSB0aGUgY29uc29sZSBwb3J0IG51bWJlciBmcm9tIHRoZSBkZXZpY2UgaWRlbnRpZmllciAnJHt0aGlzLmN1ckRldmljZUlkfScuIGAgK1xuICAgICAgICBgSXMgaXQgYW4gZW11bGF0b3I/YCk7XG4gICAgfVxuICAgIHBvcnQgPSBwYXJzZUludChwb3J0TWF0Y2hbMV0sIDEwKTtcbiAgfVxuICBjb25zdCBob3N0ID0gJzEyNy4wLjAuMSc7XG4gIGNvbnN0IHtcbiAgICBleGVjVGltZW91dCA9IDYwMDAwLFxuICAgIGNvbm5UaW1lb3V0ID0gNTAwMCxcbiAgICBpbml0VGltZW91dCA9IDUwMDAsXG4gIH0gPSBvcHRzO1xuICBhd2FpdCB0aGlzLnJlc2V0VGVsbmV0QXV0aFRva2VuKCk7XG5cbiAgY29uc3Qgb2tGbGFnID0gL15PSyQvbTtcbiAgY29uc3Qgbm9rRmxhZyA9IC9eS09cXGIvbTtcbiAgY29uc3QgZW9sID0gJ1xcclxcbic7XG4gIGNvbnN0IGNsaWVudCA9IG5ldC5jb25uZWN0KHtcbiAgICBob3N0LFxuICAgIHBvcnQsXG4gIH0pO1xuXG4gIHJldHVybiBhd2FpdCBuZXcgQigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgY29ublRpbWVvdXRPYmogPSBzZXRUaW1lb3V0KFxuICAgICAgKCkgPT4gcmVqZWN0KG5ldyBFcnJvcihgQ2Fubm90IGNvbm5lY3QgdG8gdGhlIEVtdWxhdG9yIGNvbnNvbGUgYXQgJHtob3N0fToke3BvcnR9IGAgK1xuICAgICAgICBgYWZ0ZXIgJHtjb25uVGltZW91dH1tc2ApKSwgY29ublRpbWVvdXQpO1xuICAgIGxldCBleGVjVGltZW91dE9iajtcbiAgICBsZXQgaW5pdFRpbWVvdXRPYmo7XG4gICAgbGV0IGlzQ29tbWFuZFNlbnQgPSBmYWxzZTtcbiAgICBsZXQgc2VydmVyUmVzcG9uc2UgPSBbXTtcblxuICAgIGNsaWVudC5vbmNlKCdlcnJvcicsIChlKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQoY29ublRpbWVvdXRPYmopO1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcihgQ2Fubm90IGNvbm5lY3QgdG8gdGhlIEVtdWxhdG9yIGNvbnNvbGUgYXQgJHtob3N0fToke3BvcnR9LiBgICtcbiAgICAgICAgYE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKSk7XG4gICAgfSk7XG5cbiAgICBjbGllbnQub25jZSgnY29ubmVjdCcsICgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dChjb25uVGltZW91dE9iaik7XG4gICAgICBpbml0VGltZW91dE9iaiA9IHNldFRpbWVvdXQoXG4gICAgICAgICgpID0+IHJlamVjdChuZXcgRXJyb3IoYERpZCBub3QgZ2V0IHRoZSBpbml0aWFsIHJlc3BvbnNlIGZyb20gdGhlIEVtdWxhdG9yIGNvbnNvbGUgYXQgJHtob3N0fToke3BvcnR9IGAgK1xuICAgICAgICAgIGBhZnRlciAke2luaXRUaW1lb3V0fW1zYCkpLCBpbml0VGltZW91dCk7XG4gICAgfSk7XG5cbiAgICBjbGllbnQub24oJ2RhdGEnLCAoY2h1bmspID0+IHtcbiAgICAgIHNlcnZlclJlc3BvbnNlLnB1c2goY2h1bmspO1xuICAgICAgY29uc3Qgb3V0cHV0ID0gQnVmZmVyLmNvbmNhdChzZXJ2ZXJSZXNwb25zZSkudG9TdHJpbmcoJ3V0ZjgnKS50cmltKCk7XG4gICAgICBpZiAob2tGbGFnLnRlc3Qob3V0cHV0KSkge1xuICAgICAgICAvLyBUaGUgaW5pdGlhbCBpbmNvbWluZyBkYXRhIGNodW5rIGNvbmZpcm1zIHRoZSBpbnRlcmZhY2UgaXMgcmVhZHkgZm9yIGlucHV0XG4gICAgICAgIGlmICghaXNDb21tYW5kU2VudCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dChpbml0VGltZW91dE9iaik7XG4gICAgICAgICAgc2VydmVyUmVzcG9uc2UgPSBbXTtcbiAgICAgICAgICBjb25zdCBjbWRTdHIgPSBfLmlzQXJyYXkoY21kKSA/IHV0aWwucXVvdGUoY21kKSA6IGAke2NtZH1gO1xuICAgICAgICAgIGxvZy5kZWJ1ZyhgRXhlY3V0aW5nIEVtdWxhdG9yIGNvbnNvbGUgY29tbWFuZDogJHtjbWRTdHJ9YCk7XG4gICAgICAgICAgY2xpZW50LndyaXRlKGNtZFN0cik7XG4gICAgICAgICAgY2xpZW50LndyaXRlKGVvbCk7XG4gICAgICAgICAgaXNDb21tYW5kU2VudCA9IHRydWU7XG4gICAgICAgICAgZXhlY1RpbWVvdXRPYmogPSBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgKCkgPT4gcmVqZWN0KG5ldyBFcnJvcihgRGlkIG5vdCBnZXQgYW55IHJlc3BvbnNlIGZyb20gdGhlIEVtdWxhdG9yIGNvbnNvbGUgYXQgJHtob3N0fToke3BvcnR9IGAgK1xuICAgICAgICAgICAgICBgdG8gJyR7Y21kfScgY29tbWFuZCBhZnRlciAke2V4ZWNUaW1lb3V0fW1zYCkpLCBleGVjVGltZW91dCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNsZWFyVGltZW91dChleGVjVGltZW91dE9iaik7XG4gICAgICAgIGNsaWVudC5lbmQoKTtcbiAgICAgICAgY29uc3Qgb3V0cHV0QXJyID0gb3V0cHV0LnNwbGl0KGVvbCk7XG4gICAgICAgIC8vIHJlbW92ZSB0aGUgcmVkdW5kYW50IE9LIGZsYWcgZnJvbSB0aGUgcmVzdWx0aW5nIGNvbW1hbmQgb3V0cHV0XG4gICAgICAgIHJldHVybiByZXNvbHZlKG91dHB1dEFyci5zbGljZSgwLCBvdXRwdXRBcnIubGVuZ3RoIC0gMSkuam9pbignXFxuJykudHJpbSgpKTtcbiAgICAgIH0gZWxzZSBpZiAobm9rRmxhZy50ZXN0KG91dHB1dCkpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGluaXRUaW1lb3V0T2JqKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGV4ZWNUaW1lb3V0T2JqKTtcbiAgICAgICAgY2xpZW50LmVuZCgpO1xuICAgICAgICBjb25zdCBvdXRwdXRBcnIgPSBvdXRwdXQuc3BsaXQoZW9sKTtcbiAgICAgICAgcmV0dXJuIHJlamVjdChfLnRyaW0oXy5sYXN0KG91dHB1dEFycikpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEVtdVZlcnNpb25JbmZvXG4gKiBAcHJvcGVydHkgez9zdHJpbmd9IHJldmlzaW9uIFRoZSBhY3R1YWwgcmV2aXNpb24gbnVtYmVyLCBmb3IgZXhhbXBsZSAnMzAuMC41J1xuICogQHByb3BlcnR5IHs/bnVtYmVyfSBidWlsZElkIFRoZSBidWlsZCBpZGVudGlmaWVyLCBmb3IgZXhhbXBsZSA2MzA2MDQ3XG4gKi9cblxuLyoqXG4gKiBSZXRyaWV2ZXMgZW11bGF0b3IgdmVyc2lvbiBmcm9tIHRoZSBmaWxlIHN5c3RlbVxuICpcbiAqIEByZXR1cm5zIHtFbXVWZXJzaW9uSW5mb30gSWYgbm8gdmVyc2lvbiBpbmZvIGNvdWxkIGJlIHBhcnNlZCB0aGVuIGFuIGVtcHR5XG4gKiBvYmplY3QgaXMgcmV0dXJuZWRcbiAqL1xuZW11TWV0aG9kcy5nZXRFbXVWZXJzaW9uSW5mbyA9IGFzeW5jIGZ1bmN0aW9uIGdldEVtdVZlcnNpb25JbmZvICgpIHtcbiAgY29uc3QgcHJvcHNQYXRoID0gcGF0aC5qb2luKHRoaXMuc2RrUm9vdCwgJ2VtdWxhdG9yJywgJ3NvdXJjZS5wcm9wZXJ0aWVzJyk7XG4gIGlmICghYXdhaXQgZnMuZXhpc3RzKHByb3BzUGF0aCkpIHtcbiAgICByZXR1cm4ge307XG4gIH1cblxuICBjb25zdCBjb250ZW50ID0gYXdhaXQgZnMucmVhZEZpbGUocHJvcHNQYXRoLCAndXRmOCcpO1xuICBjb25zdCByZXZpc2lvbk1hdGNoID0gL15Qa2dcXC5SZXZpc2lvbj0oW1xcZC5dKykkL20uZXhlYyhjb250ZW50KTtcbiAgY29uc3QgcmVzdWx0ID0ge307XG4gIGlmIChyZXZpc2lvbk1hdGNoKSB7XG4gICAgcmVzdWx0LnJldmlzaW9uID0gcmV2aXNpb25NYXRjaFsxXTtcbiAgfVxuICBjb25zdCBidWlsZElkTWF0Y2ggPSAvXlBrZ1xcLkJ1aWxkSWQ9KFxcZCspJC9tLmV4ZWMoY29udGVudCk7XG4gIGlmIChidWlsZElkTWF0Y2gpIHtcbiAgICByZXN1bHQuYnVpbGRJZCA9IHBhcnNlSW50KGJ1aWxkSWRNYXRjaFsxXSwgMTApO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIFJldHJpZXZlcyBlbXVsYXRvciBpbWFnZSBwcm9wZXJ0aWVzIGZyb20gdGhlIGxvY2FsIGZpbGUgc3lzdGVtXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGF2ZE5hbWUgRW11bGF0b3IgbmFtZS4gU2hvdWxkIE5PVCBzdGFydCB3aXRoICdAJyBjaGFyYWN0ZXJcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiB0aGVyZSB3YXMgYSBmYWlsdXJlIHdoaWxlIGV4dHJhY3RpbmcgdGhlIHByb3BlcnRpZXNcbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBjb250ZW50IG9mIGVtdWxhdG9yIGltYWdlIHByb3BlcnRpZXMgZmlsZS5cbiAqIFVzdWFsbHkgdGhpcyBjb25maWd1cmF0aW9uIC5pbmkgZmlsZSBoYXMgdGhlIGZvbGxvd2luZyBjb250ZW50OlxuICogICBhdmQuaW5pLmVuY29kaW5nPVVURi04XG4gKiAgIHBhdGg9L1VzZXJzL3VzZXJuYW1lLy5hbmRyb2lkL2F2ZC9QaXhlbF9YTF9BUElfMzAuYXZkXG4gKiAgIHBhdGgucmVsPWF2ZC9QaXhlbF9YTF9BUElfMzAuYXZkXG4gKiAgIHRhcmdldD1hbmRyb2lkLTMwXG4gKi9cbmVtdU1ldGhvZHMuZ2V0RW11SW1hZ2VQcm9wZXJ0aWVzID0gYXN5bmMgZnVuY3Rpb24gZ2V0RW11SW1hZ2VQcm9wZXJ0aWVzIChhdmROYW1lKSB7XG4gIGNvbnN0IGF2ZHMgPSBhd2FpdCBsaXN0RW11bGF0b3JzKCk7XG4gIGNvbnN0IGF2ZCA9IGF2ZHMuZmluZCgoe25hbWV9KSA9PiBuYW1lID09PSBhdmROYW1lKTtcbiAgaWYgKCFhdmQpIHtcbiAgICBsZXQgbXNnID0gYENhbm5vdCBmaW5kICcke2F2ZE5hbWV9JyBlbXVsYXRvci4gYDtcbiAgICBpZiAoXy5pc0VtcHR5KGF2ZHMpKSB7XG4gICAgICBtc2cgKz0gYE5vIGVtdWxhdG9ycyBoYXZlIGJlZW4gZGV0ZWN0ZWQgb24geW91ciBzeXN0ZW1gO1xuICAgIH0gZWxzZSB7XG4gICAgICBtc2cgKz0gYEF2YWlsYWJsZSBhdmQgbmFtZXMgYXJlOiAke2F2ZHMubWFwKCh7bmFtZX0pID0+IG5hbWUpfWA7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICB9XG4gIHJldHVybiBpbmkucGFyc2UoYXdhaXQgZnMucmVhZEZpbGUoYXZkLmNvbmZpZywgJ3V0ZjgnKSk7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGdpdmVuIGVtdWxhdG9yIGV4aXN0cyBpbiB0aGUgbGlzdCBvZiBhdmFpbGFibGUgYXZkcy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYXZkTmFtZSAtIFRoZSBuYW1lIG9mIGVtdWxhdG9yIHRvIHZlcmlmeSBmb3IgZXhpc3RlbmNlLlxuICogU2hvdWxkIE5PVCBzdGFydCB3aXRoICdAJyBjaGFyYWN0ZXJcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgZW11bGF0b3Igd2l0aCBnaXZlbiBuYW1lIGRvZXMgbm90IGV4aXN0LlxuICovXG5lbXVNZXRob2RzLmNoZWNrQXZkRXhpc3QgPSBhc3luYyBmdW5jdGlvbiBjaGVja0F2ZEV4aXN0IChhdmROYW1lKSB7XG4gIGNvbnN0IGF2ZHMgPSBhd2FpdCBsaXN0RW11bGF0b3JzKCk7XG4gIGlmICghYXZkcy5zb21lKCh7bmFtZX0pID0+IG5hbWUgPT09IGF2ZE5hbWUpKSB7XG4gICAgbGV0IG1zZyA9IGBBdmQgJyR7YXZkTmFtZX0nIGlzIG5vdCBhdmFpbGFibGUuIGA7XG4gICAgaWYgKF8uaXNFbXB0eShhdmRzKSkge1xuICAgICAgbXNnICs9IGBObyBlbXVsYXRvcnMgaGF2ZSBiZWVuIGRldGVjdGVkIG9uIHlvdXIgc3lzdGVtYDtcbiAgICB9IGVsc2Uge1xuICAgICAgbXNnICs9IGBQbGVhc2Ugc2VsZWN0IHlvdXIgYXZkIG5hbWUgZnJvbSBvbmUgb2YgdGhlc2U6ICcke2F2ZHMubWFwKCh7bmFtZX0pID0+IG5hbWUpfSdgO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGVtdU1ldGhvZHM7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsSUFBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUksUUFBQSxHQUFBSixPQUFB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